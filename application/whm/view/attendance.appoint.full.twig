{% extends 'static/base.twig' %}
    {% block content %}

    <table class="table table-hover">


            <h2>List of Attendees</h2>
              <thead>
                <tr>
                  <th>Last Name</th>
                  <th>First Name</th>
                  <th>Gender</th>
                  <th>Medicare Number</th>
                  <th>Checked In</th>
                </tr>
              </thead>
              
              
              {% for participant in participants %}
                <tbody>
                    <tr>
                      
                      <td><h3>{{ participant.lastName }}</h3></td>
                      <td><h3>{{ participant.firstName }}</h3></td>
                      <td><h3>{{ participant.gender }}</h3></td>
                      <td><h3>{{ participant.medicare }}</h3></td>
                      <td>
                           <div class="onoffswitch"
                                participanttimeslotid='{{participant.participantTimeSlotId}}'>
                                <input type="checkbox" name="onoffswitch" class="onoffswitch-checkbox" id="myonoffswitch-{{participant.id}}" {{(participant.attend) ? 'checked="checked"' : ''}}>
                                <label class="onoffswitch-label" for="myonoffswitch-{{participant.id}}">
                                    <div class="onoffswitch-inner"></div>
                                    <div class="onoffswitch-switch"></div>
                                </label>
                          </div>

                      </td>

                    </tr>

                </tbody>

              {% endfor %}
                  
                                
    </table>



    {% endblock content %}

{% block footer %}
<script type="text/javascript">
$(document).ready(function(){
    $('div.onoffswitch').change(function(){

     var participanttimeslotid = $(this).attr('participanttimeslotid');
     var attend = $(this).children('input').attr('checked') == 'checked';

      jQuery.ajax
      ({
        url: '/todaysevents/'+ participanttimeslotid +'/' + Number(attend),
        type: 'PUT',
        //async: false
      });
    });
 });
</script>

{% endblock footer %}
                                    